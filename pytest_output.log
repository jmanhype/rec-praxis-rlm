/Users/speed/.pyenv/versions/3.10.14/lib/python3.10/site-packages/pytest_redis/executor/process.py:11: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  from pkg_resources import parse_version
============================= test session starts ==============================
platform darwin -- Python 3.10.14, pytest-8.0.0, pluggy-1.5.0 -- /Users/speed/.pyenv/versions/3.10.14/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.10.14', 'Platform': 'macOS-15.6.1-arm64-arm-64bit', 'Packages': {'pytest': '8.0.0', 'pluggy': '1.5.0'}, 'Plugins': {'black': '0.3.12', 'factoryboy': '2.6.0', 'asyncio': '0.23.5', 'responses': '0.5.1', 'metadata': '3.1.0', 'freezegun': '0.4.2', 'timeout': '2.2.0', 'instafail': '0.5.0', 'pyfakefs': '5.9.1', 'anyio': '4.11.0', 'deadfixtures': '2.2.1', 'repeat': '0.9.3', 'sugar': '1.0.0', 'html': '4.1.1', 'redis': '3.0.2', 'subtests': '0.11.0', 'opik': '1.8.42', 'sqlalchemy': '0.3.0', 'langsmith': '0.4.37', 'env': '1.1.3', 'mypy': '0.10.3', 'randomly': '3.15.0', 'cov': '4.1.0', 'jaxtyping': '0.3.2', 'clarity': '1.0.1', 'rerunfailures': '13.0', 'reportlog': '0.3.0', 'mock': '3.12.0', 'postgresql': '5.0.0', 'hypothesis': '6.135.14', 'ordering': '0.6', 'picked': '0.5.0', 'Faker': '19.13.0', 'aiohttp': '1.0.5', 'faker': '2.0.0', 'profiling': '1.7.0', 'aiofiles': '0.2.0', 'xdist': '3.5.0', 'recording': '0.13.1', 'typeguard': '4.4.4', 'alembic': '0.10.7', 'testmon': '2.1.1', 'benchmark': '4.0.0', 'ruff': '0.2.1', 'hydra-core': '1.3.2', 'socket': '0.6.0', 'aioresponses': '0.2.0', 'variables': '3.0.0'}}
Using --randomly-seed=855212909
hypothesis profile 'default'
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/speed/straughter/rec-praxis-rlm
configfile: pyproject.toml
testpaths: tests
plugins: black-0.3.12, factoryboy-2.6.0, asyncio-0.23.5, responses-0.5.1, metadata-3.1.0, freezegun-0.4.2, timeout-2.2.0, instafail-0.5.0, pyfakefs-5.9.1, anyio-4.11.0, deadfixtures-2.2.1, repeat-0.9.3, sugar-1.0.0, html-4.1.1, redis-3.0.2, subtests-0.11.0, opik-1.8.42, sqlalchemy-0.3.0, langsmith-0.4.37, env-1.1.3, mypy-0.10.3, randomly-3.15.0, cov-4.1.0, jaxtyping-0.3.2, clarity-1.0.1, rerunfailures-13.0, reportlog-0.3.0, mock-3.12.0, postgresql-5.0.0, hypothesis-6.135.14, ordering-0.6, picked-0.5.0, Faker-19.13.0, aiohttp-1.0.5, faker-2.0.0, profiling-1.7.0, aiofiles-0.2.0, xdist-3.5.0, recording-0.13.1, typeguard-4.4.4, alembic-0.10.7, testmon-2.1.1, benchmark-4.0.0, ruff-0.2.1, hydra-core-1.3.2, socket-0.6.0, aioresponses-0.2.0, variables-3.0.0
asyncio: mode=strict
collecting ... collected 327 items

tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_sum_function PASSED [  0%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_list_comprehensions PASSED [  0%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_zip_function PASSED [  0%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_while_loops PASSED [  1%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_filter_function PASSED [  1%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_max_min_functions PASSED [  1%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_enumerate_function PASSED [  2%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_map_function PASSED [  2%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_sorted_function PASSED [  2%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_len_function PASSED [  3%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_math_operations PASSED [  3%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_for_loops PASSED [  3%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_string_operations PASSED [  3%]
tests/unit/test_sandbox.py::TestSandboxAllowedOperations::test_dict_comprehensions PASSED [  4%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_dict_blocked PASSED [  4%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_exec_blocked PASSED [  4%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_import_blocked PASSED [  5%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_eval_blocked PASSED [  5%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_open_blocked PASSED [  5%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_from_import_blocked PASSED [  6%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_file_blocked PASSED [  6%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_builtins_blocked PASSED [  6%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_object_subclasses_blocked PASSED [  7%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_type_subclasses_blocked PASSED [  7%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_import_blocked PASSED [  7%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_globals_blocked PASSED [  7%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_locals_blocked PASSED [  8%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_compile_blocked PASSED [  8%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_code_blocked PASSED [  8%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_vars_blocked PASSED [  9%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_globals_blocked PASSED [  9%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_name_assignment_blocked PASSED [  9%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_file_access_blocked PASSED [ 10%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dunder_class_blocked PASSED [ 10%]
tests/unit/test_sandbox.py::TestSandboxSecurity::test_dir_blocked PASSED [ 10%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_timeout_enforcement PASSED [ 11%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_last_line_is_none_value PASSED [ 11%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_last_line_eval_exception_handled PASSED [ 11%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_stderr_captured_and_appended_to_output PASSED [ 11%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_last_line_keyword_statement_not_evaluated PASSED [ 12%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_stderr_output_captured PASSED [ 12%]
tests/unit/test_sandbox.py::TestSandboxTimeout::test_empty_last_line_not_evaluated PASSED [ 12%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_index_error_handling PASSED [ 13%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_syntax_error_in_code PASSED [ 13%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_runtime_exception_handling PASSED [ 13%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_name_error_handling PASSED [ 14%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_last_line_not_expression PASSED [ 14%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_type_error_handling PASSED [ 14%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_last_line_evaluation_in_exec_mode PASSED [ 14%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_stderr_capture PASSED [ 15%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_context_vars_injection PASSED [ 15%]
tests/unit/test_sandbox.py::TestSandboxEdgeCases::test_key_error_handling PASSED [ 15%]
tests/unit/test_sandbox.py::TestSandboxOutputCapture::test_max_output_chars_limit PASSED [ 16%]
tests/unit/test_sandbox.py::TestSandboxOutputCapture::test_captures_expression_result PASSED [ 16%]
tests/unit/test_sandbox.py::TestSandboxOutputCapture::test_captures_print_output PASSED [ 16%]
tests/unit/test_rlm.py::TestExecutionResult::test_execution_time_must_be_non_negative PASSED [ 17%]
tests/unit/test_rlm.py::TestExecutionResult::test_failed_execution PASSED [ 17%]
tests/unit/test_rlm.py::TestExecutionResult::test_successful_execution PASSED [ 17%]
tests/unit/test_rlm.py::TestExecutionResult::test_code_hash_required PASSED [ 18%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_head_n_lines_greater_than_document PASSED [ 18%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_head_first_n_lines PASSED [ 18%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_tail_last_n_lines PASSED [ 18%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_head_nonexistent_doc_raises_error PASSED [ 19%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_tail_with_zero_lines PASSED [ 19%]
tests/unit/test_rlm.py::TestRLMContextHeadTail::test_tail_nonexistent_doc_raises_error PASSED [ 19%]
tests/unit/test_rlm.py::TestRLMContextPeek::test_peek_out_of_bounds_handling PASSED [ 20%]
tests/unit/test_rlm.py::TestRLMContextPeek::test_peek_extracts_char_range PASSED [ 20%]
tests/unit/test_rlm.py::TestRLMContextPeek::test_peek_doc_not_found_error PASSED [ 20%]
tests/unit/test_rlm.py::TestRLMContextDocumentManagement::test_remove_document PASSED [ 21%]
tests/unit/test_rlm.py::TestRLMContextDocumentManagement::test_document_indexing PASSED [ 21%]
tests/unit/test_rlm.py::TestRLMContextDocumentManagement::test_add_document PASSED [ 21%]
tests/unit/test_rlm.py::TestRLMContextDocumentManagement::test_duplicate_doc_id_rejection PASSED [ 22%]
tests/unit/test_rlm.py::TestRLMContextDocumentManagement::test_remove_nonexistent_document_raises_error PASSED [ 22%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_exception_handling PASSED [ 22%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_asafe_exec_handles_exceptions PASSED [ 22%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_simple_code PASSED [ 23%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_execution_time_recorded PASSED [ 23%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_code_hash_computed PASSED [ 23%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_with_context_vars PASSED [ 24%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_asafe_exec_uses_threadpool PASSED [ 24%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_asafe_exec_passes_context_vars_correctly PASSED [ 24%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_asafe_exec_concurrent_execution PASSED [ 25%]
tests/unit/test_rlm.py::TestRLMContextSafeExec::test_safe_exec_captures_output PASSED [ 25%]
tests/unit/test_rlm.py::TestSearchMatch::test_optional_context_fields PASSED [ 25%]
tests/unit/test_rlm.py::TestSearchMatch::test_start_char_less_than_end_char PASSED [ 25%]
tests/unit/test_rlm.py::TestSearchMatch::test_valid_search_match PASSED  [ 26%]
tests/unit/test_rlm.py::TestSearchMatch::test_line_number_must_be_positive PASSED [ 26%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_context_chars PASSED [ 26%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_regex_pattern PASSED [ 27%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_case_sensitivity PASSED [ 27%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_allows_safe_patterns PASSED [ 27%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_invalid_regex_raises_search_error PASSED [ 28%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_nonexistent_doc_raises_error PASSED [ 28%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_max_matches_limit PASSED [ 28%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_warns_on_alternation_with_quantifier PASSED [ 29%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_redos_protection_excessive_wildcards PASSED [ 29%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_redos_protection_nested_quantifiers PASSED [ 29%]
tests/unit/test_rlm.py::TestRLMContextGrep::test_grep_redos_protection_pattern_too_long PASSED [ 29%]
tests/integration/test_e2e_agent.py::TestIT003AutonomousPlanning::test_planner_with_multiple_contexts PASSED [ 30%]
tests/integration/test_e2e_agent.py::TestIT003AutonomousPlanning::test_autonomous_planning_workflow PASSED [ 30%]
tests/integration/test_e2e_agent.py::TestAgentToolIntegration::test_add_context_adds_tools PASSED [ 30%]
tests/integration/test_e2e_agent.py::TestAgentToolIntegration::test_planner_has_recall_tool PASSED [ 31%]
tests/integration/test_e2e_agent.py::TestAgentToolIntegration::test_tool_names_are_set PASSED [ 31%]
tests/integration/test_e2e_agent.py::TestMaxItersStoppingCondition::test_planner_returns_answer_at_max_iters PASSED [ 31%]
tests/integration/test_e2e_agent.py::TestMaxItersStoppingCondition::test_max_iters_respected PASSED [ 32%]
tests/unit/test_property_based.py::TestRLMContextProperties::test_head_returns_first_n_lines PASSED [ 32%]
tests/unit/test_property_based.py::TestRLMContextProperties::test_peek_preserves_content PASSED [ 32%]
tests/unit/test_property_based.py::TestRLMContextProperties::test_grep_finds_all_occurrences PASSED [ 33%]
tests/unit/test_property_based.py::TestSandboxSecurityProperties::test_prohibited_builtins_always_rejected PASSED [ 33%]
tests/unit/test_property_based.py::TestSandboxSecurityProperties::test_prohibited_imports_always_rejected PASSED [ 33%]
tests/unit/test_property_based.py::TestSandboxSecurityProperties::test_safe_arithmetic_always_succeeds PASSED [ 33%]
tests/unit/test_property_based.py::TestProceduralMemoryProperties::test_recall_returns_most_recent_first PASSED [ 34%]
tests/unit/test_property_based.py::TestProceduralMemoryProperties::test_top_k_returns_at_most_k_results PASSED [ 34%]
tests/unit/test_property_based.py::TestEmbeddingCacheProperties::test_cache_key_unique_for_different_texts PASSED [ 34%]
tests/unit/test_property_based.py::TestEmbeddingCacheProperties::test_cache_size_respected PASSED [ 35%]
tests/unit/test_property_based.py::TestEmbeddingCacheProperties::test_batch_embed_consistent_with_single PASSED [ 35%]
tests/unit/test_property_based.py::TestEmbeddingCacheProperties::test_cache_key_deterministic PASSED [ 35%]
tests/unit/test_property_based.py::TestConfigurationProperties::test_cache_size_always_positive PASSED [ 36%]
tests/unit/test_property_based.py::TestConfigurationProperties::test_memory_config_weights_must_sum_to_one PASSED [ 36%]
tests/unit/test_exceptions.py::TestRLMErrors::test_rlm_error_inherits_from_base PASSED [ 36%]
tests/unit/test_exceptions.py::TestRLMErrors::test_document_not_found_error PASSED [ 37%]
tests/unit/test_exceptions.py::TestRLMErrors::test_search_error PASSED   [ 37%]
tests/unit/test_exceptions.py::TestRLMErrors::test_execution_error PASSED [ 37%]
tests/unit/test_exceptions.py::TestMemoryErrors::test_embedding_error PASSED [ 37%]
tests/unit/test_exceptions.py::TestMemoryErrors::test_retrieval_error PASSED [ 38%]
tests/unit/test_exceptions.py::TestMemoryErrors::test_memory_error_inherits_from_base PASSED [ 38%]
tests/unit/test_exceptions.py::TestMemoryErrors::test_storage_error PASSED [ 38%]
tests/unit/test_exceptions.py::TestBaseException::test_base_exception_with_message PASSED [ 39%]
tests/unit/test_exceptions.py::TestBaseException::test_base_exception_is_exception PASSED [ 39%]
tests/unit/test_exceptions.py::TestPlannerErrors::test_optimization_error PASSED [ 39%]
tests/unit/test_exceptions.py::TestPlannerErrors::test_lm_error PASSED   [ 40%]
tests/unit/test_exceptions.py::TestPlannerErrors::test_planner_error_inherits_from_base PASSED [ 40%]
tests/unit/test_exceptions.py::TestPlannerErrors::test_tool_call_error PASSED [ 40%]
tests/unit/test_config.py::TestReplConfig::test_timeout_constraints PASSED [ 40%]
tests/unit/test_config.py::TestReplConfig::test_allowed_builtins_validation PASSED [ 41%]
tests/unit/test_config.py::TestReplConfig::test_defaults PASSED          [ 41%]
tests/unit/test_config.py::TestReplConfig::test_custom_values PASSED     [ 41%]
tests/unit/test_config.py::TestMemoryConfig::test_custom_values PASSED   [ 42%]
tests/unit/test_config.py::TestMemoryConfig::test_env_weight_constraints PASSED [ 42%]
tests/unit/test_config.py::TestMemoryConfig::test_top_k_constraints PASSED [ 42%]
tests/unit/test_config.py::TestMemoryConfig::test_weight_sum_validation PASSED [ 43%]
tests/unit/test_config.py::TestMemoryConfig::test_goal_weight_constraints PASSED [ 43%]
tests/unit/test_config.py::TestMemoryConfig::test_defaults PASSED        [ 43%]
tests/unit/test_config.py::TestMemoryConfig::test_similarity_threshold_constraints PASSED [ 44%]
tests/unit/test_config.py::TestPlannerConfig::test_defaults PASSED       [ 44%]
tests/unit/test_config.py::TestPlannerConfig::test_temperature_constraints PASSED [ 44%]
tests/unit/test_config.py::TestPlannerConfig::test_optimizer_auto_level_validation PASSED [ 44%]
tests/unit/test_config.py::TestPlannerConfig::test_max_iters_constraints PASSED [ 45%]
tests/unit/test_config.py::TestPlannerConfig::test_custom_values PASSED  [ 45%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_import_error_when_not_installed PASSED [ 45%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_embed_single_text PASSED [ 46%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_embed_with_numpy_array PASSED [ 46%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_model_loading PASSED [ 46%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_embed_batch PASSED [ 47%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_embed_batch_with_numpy_array PASSED [ 47%]
tests/unit/test_embeddings.py::TestSentenceTransformerEmbedding::test_dimension_consistency PASSED [ 47%]
tests/unit/test_embeddings.py::TestTextSimilarityFallback::test_tokenization PASSED [ 48%]
tests/unit/test_embeddings.py::TestTextSimilarityFallback::test_empty_strings PASSED [ 48%]
tests/unit/test_embeddings.py::TestTextSimilarityFallback::test_case_sensitivity PASSED [ 48%]
tests/unit/test_embeddings.py::TestTextSimilarityFallback::test_jaccard_similarity PASSED [ 48%]
tests/unit/test_embeddings.py::TestAPIEmbeddingCache::test_cache_key_generation PASSED [ 49%]
tests/unit/test_embeddings.py::TestAPIEmbeddingCache::test_batch_cache_aware PASSED [ 49%]
tests/unit/test_embeddings.py::TestAPIEmbeddingCache::test_cache_lru_eviction PASSED [ 49%]
tests/unit/test_embeddings.py::TestAPIEmbeddingCache::test_cache_hit_avoids_api_call PASSED [ 50%]
tests/unit/test_embeddings.py::TestAPIEmbeddingCache::test_cache_reduces_api_costs PASSED [ 50%]
tests/unit/test_embeddings.py::TestEmbeddingProvider::test_abstract_methods PASSED [ 50%]
tests/unit/test_embeddings.py::TestAPIEmbedding::test_fallback_on_api_failure PASSED [ 51%]
tests/unit/test_embeddings.py::TestAPIEmbedding::test_unsupported_provider_raises_error PASSED [ 51%]
tests/unit/test_embeddings.py::TestAPIEmbedding::test_openai_embed_batch PASSED [ 51%]
tests/unit/test_embeddings.py::TestAPIEmbedding::test_openai_provider PASSED [ 51%]
tests/unit/test_embeddings.py::TestAPIEmbedding::test_import_error_when_openai_not_installed PASSED [ 52%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_cache_key_generation PASSED [ 52%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_cache_lru_eviction PASSED [ 52%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_cache_miss PASSED [ 53%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_custom_cache_size PASSED [ 53%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_cache_hit PASSED [ 53%]
tests/unit/test_embeddings.py::TestSentenceTransformerCache::test_batch_cache_aware PASSED [ 54%]
tests/integration/test_e2e_memory.py::TestIT004PersistenceAcrossRestarts::test_persistence_across_restart PASSED [ 54%]
tests/integration/test_e2e_memory.py::TestIT007EmbeddingFallback::test_fallback_without_embeddings PASSED [ 54%]
tests/integration/test_e2e_memory.py::TestIT001StoreAndRetrieve::test_store_50_and_retrieve_top_k PASSED [ 55%]
tests/integration/test_e2e_memory.py::TestIT006HybridScoring::test_hybrid_scoring_weighting PASSED [ 55%]
tests/integration/test_e2e_context.py::TestIT005PerformanceRequirements::test_search_large_document_under_500ms PASSED [ 55%]
tests/integration/test_e2e_context.py::TestIT005PerformanceRequirements::test_head_tail_peek_efficient PASSED [ 55%]
tests/integration/test_e2e_context.py::TestIT002LogAnalysis::test_log_analysis_workflow PASSED [ 56%]
tests/integration/test_e2e_context.py::TestIT005SandboxSecurity::test_no_side_effects_from_blocked_code PASSED [ 56%]
tests/integration/test_e2e_context.py::TestIT005SandboxSecurity::test_error_messages_are_clear PASSED [ 56%]
tests/integration/test_e2e_context.py::TestIT005SandboxSecurity::test_all_prohibited_operations_blocked PASSED [ 57%]
tests/unit/test_memory.py::TestJSONLPersistence::test_load_parses_all_lines PASSED [ 57%]
tests/unit/test_memory.py::TestJSONLPersistence::test_atomic_writes PASSED [ 57%]
tests/unit/test_memory.py::TestJSONLPersistence::test_corrupted_lines_skipped_with_warning PASSED [ 58%]
tests/unit/test_memory.py::TestJSONLPersistence::test_store_appends_to_file PASSED [ 58%]
tests/unit/test_memory.py::TestHybridScoring::test_top_k_selection PASSED [ 58%]
tests/unit/test_memory.py::TestHybridScoring::test_60_40_weighting PASSED [ 59%]
tests/unit/test_memory.py::TestHybridScoring::test_configurable_weights PASSED [ 59%]
tests/unit/test_memory.py::TestHybridScoring::test_threshold_filtering PASSED [ 59%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_migrate_from_legacy_version_0_0 PASSED [ 59%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_recompute_embeddings_preserves_version_marker PASSED [ 60%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_empty_file_loads_successfully PASSED [ 60%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_unsupported_future_version_raises_error PASSED [ 60%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_invalid_version_marker_treated_as_legacy PASSED [ 61%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_new_file_gets_version_marker PASSED [ 61%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_load_legacy_format_without_version_marker PASSED [ 61%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_compact_preserves_version_marker PASSED [ 62%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_load_with_version_marker PASSED [ 62%]
tests/unit/test_memory.py::TestStorageVersionMigration::test_append_to_existing_file_preserves_version_marker PASSED [ 62%]
tests/unit/test_memory.py::TestJaccardSimilarity::test_empty_sets PASSED [ 62%]
tests/unit/test_memory.py::TestJaccardSimilarity::test_no_overlap PASSED [ 63%]
tests/unit/test_memory.py::TestJaccardSimilarity::test_identical_sets PASSED [ 63%]
tests/unit/test_memory.py::TestJaccardSimilarity::test_partial_overlap PASSED [ 63%]
tests/unit/test_memory.py::TestJaccardSimilarity::test_case_sensitivity PASSED [ 64%]
tests/unit/test_memory.py::TestExperience::test_action_must_be_string PASSED [ 64%]
tests/unit/test_memory.py::TestExperience::test_success_must_be_bool PASSED [ 64%]
tests/unit/test_memory.py::TestExperience::test_goal_must_be_string PASSED [ 65%]
tests/unit/test_memory.py::TestExperience::test_embedding_must_be_list_of_floats PASSED [ 65%]
tests/unit/test_memory.py::TestExperience::test_valid_experience PASSED  [ 65%]
tests/unit/test_memory.py::TestExperience::test_result_must_be_string PASSED [ 66%]
tests/unit/test_memory.py::TestExperience::test_env_features_must_be_list PASSED [ 66%]
tests/unit/test_memory.py::TestExperience::test_experience_with_optional_fields PASSED [ 66%]
tests/unit/test_memory.py::TestExperience::test_timestamp_must_be_positive PASSED [ 66%]
tests/unit/test_memory.py::TestExperience::test_cost_must_be_float PASSED [ 67%]
tests/unit/test_memory.py::TestFAISSIndexing::test_rebuild_faiss_index_after_compact PASSED [ 67%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recall_with_faiss_require_success_filter PASSED [ 67%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_index_built_on_load PASSED [ 68%]
tests/unit/test_memory.py::TestFAISSIndexing::test_store_incremental_add_with_zero_norm_embedding PASSED [ 68%]
tests/unit/test_memory.py::TestFAISSIndexing::test_compact_with_faiss_disabled PASSED [ 68%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recall_with_faiss_invalid_index_filtering PASSED [ 69%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recall_with_faiss PASSED [ 69%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_available PASSED [ 69%]
tests/unit/test_memory.py::TestFAISSIndexing::test_rebuild_faiss_index_exception_handling PASSED [ 70%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recall_fallback_to_linear_when_no_faiss_index PASSED [ 70%]
tests/unit/test_memory.py::TestFAISSIndexing::test_rebuild_faiss_index_early_return_when_disabled PASSED [ 70%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recompute_embeddings_with_faiss_disabled PASSED [ 70%]
tests/unit/test_memory.py::TestFAISSIndexing::test_recall_fallback_when_no_query_embedding PASSED [ 71%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_candidate_multiplier_filtering PASSED [ 71%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_index_zero_vector_fallback PASSED [ 71%]
tests/unit/test_memory.py::TestFAISSIndexing::test_rebuild_faiss_index_after_recompute_embeddings PASSED [ 72%]
tests/unit/test_memory.py::TestFAISSIndexing::test_init_with_faiss_disabled PASSED [ 72%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_index_incremental_add PASSED [ 72%]
tests/unit/test_memory.py::TestFAISSIndexing::test_faiss_index_handles_invalid_embeddings PASSED [ 73%]
tests/unit/test_memory.py::TestProceduralMemory::test_recompute_embeddings_in_memory_mode_skips_file_write PASSED [ 73%]
tests/unit/test_memory.py::TestProceduralMemory::test_cosine_similarity_identical_vectors PASSED [ 73%]
tests/unit/test_memory.py::TestProceduralMemory::test_append_experience_temp_file_missing_on_exception PASSED [ 74%]
tests/unit/test_memory.py::TestProceduralMemory::test_recall_embedding_failure_warning PASSED [ 74%]
tests/unit/test_memory.py::TestProceduralMemory::test_jaccard_similarity_one_empty_set PASSED [ 74%]
tests/unit/test_memory.py::TestProceduralMemory::test_cosine_similarity_orthogonal_vectors PASSED [ 74%]
tests/unit/test_memory.py::TestProceduralMemory::test_recompute_embeddings_success PASSED [ 75%]
tests/unit/test_memory.py::TestProceduralMemory::test_recompute_embeddings_individual_failures_logged PASSED [ 75%]
tests/unit/test_memory.py::TestProceduralMemory::test_compact_with_none_returns_zero PASSED [ 75%]
tests/unit/test_memory.py::TestProceduralMemory::test_compact_rewrites_storage_file PASSED [ 76%]
tests/unit/test_memory.py::TestProceduralMemory::test_require_success_filter PASSED [ 76%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_without_embedding_model PASSED [ 76%]
tests/unit/test_memory.py::TestProceduralMemory::test_load_experiences_file_not_found PASSED [ 77%]
tests/unit/test_memory.py::TestProceduralMemory::test_load_experiences_empty_lines_skipped PASSED [ 77%]
tests/unit/test_memory.py::TestProceduralMemory::test_compact_in_memory_mode_skips_file_write PASSED [ 77%]
tests/unit/test_memory.py::TestProceduralMemory::test_cosine_similarity_mismatched_dimensions PASSED [ 77%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_injected_provider_ignores_config_model PASSED [ 78%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_with_injected_provider_backward_compatibility PASSED [ 78%]
tests/unit/test_memory.py::TestProceduralMemory::test_arecall_uses_threadpool PASSED [ 78%]
tests/unit/test_memory.py::TestProceduralMemory::test_store_embedding_failure_warning PASSED [ 79%]
tests/unit/test_memory.py::TestProceduralMemory::test_recall_filters_by_threshold PASSED [ 79%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_with_injected_embedding_provider PASSED [ 79%]
tests/unit/test_memory.py::TestProceduralMemory::test_append_experience_temp_file_cleanup_on_exception PASSED [ 80%]
tests/unit/test_memory.py::TestProceduralMemory::test_arecall_passes_parameters_correctly PASSED [ 80%]
tests/unit/test_memory.py::TestProceduralMemory::test_recall_returns_top_k_sorted PASSED [ 80%]
tests/unit/test_memory.py::TestProceduralMemory::test_append_experience_storage_error PASSED [ 81%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_with_none_injected_provider_uses_config PASSED [ 81%]
tests/unit/test_memory.py::TestProceduralMemory::test_recompute_embeddings_storage_error PASSED [ 81%]
tests/unit/test_memory.py::TestProceduralMemory::test_recall_custom_top_k PASSED [ 81%]
tests/unit/test_memory.py::TestProceduralMemory::test_compact_storage_error PASSED [ 82%]
tests/unit/test_memory.py::TestProceduralMemory::test_compact_keeps_recent_n PASSED [ 82%]
tests/unit/test_memory.py::TestProceduralMemory::test_cosine_similarity_zero_vectors PASSED [ 82%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_injected_provider_none_when_no_config_model PASSED [ 83%]
tests/unit/test_memory.py::TestProceduralMemory::test_recompute_embeddings_model_load_failure PASSED [ 83%]
tests/unit/test_memory.py::TestProceduralMemory::test_arecall_concurrent_execution PASSED [ 83%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_with_failed_embedding_model PASSED [ 84%]
tests/unit/test_memory.py::TestProceduralMemory::test_store_adds_experience PASSED [ 84%]
tests/unit/test_memory.py::TestProceduralMemory::test_init_loads_existing_jsonl PASSED [ 84%]
tests/unit/test_memory.py::TestProceduralMemory::test_store_computes_embedding_if_missing PASSED [ 85%]
tests/unit/test_telemetry.py::TestTelemetryHooks::test_add_telemetry_hook PASSED [ 85%]
tests/unit/test_telemetry.py::TestTelemetryHooks::test_multiple_hooks_for_same_event PASSED [ 85%]
tests/unit/test_telemetry.py::TestTelemetryHooks::test_emit_event_silently_handles_callback_exceptions PASSED [ 85%]
tests/unit/test_telemetry.py::TestTelemetryHooks::test_setup_mlflow_raises_import_error_when_unavailable PASSED [ 86%]
tests/unit/test_telemetry.py::TestTelemetryHooks::test_emit_event_triggers_hooks PASSED [ 86%]
tests/unit/test_telemetry.py::TestSetupMLflowTracing::test_setup_with_experiment_name PASSED [ 86%]
tests/unit/test_telemetry.py::TestSetupMLflowTracing::test_setup_with_defaults PASSED [ 87%]
tests/unit/test_telemetry.py::TestSetupMLflowTracing::test_log_traces_from_compile_flag PASSED [ 87%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_prediction_with_non_experience_objects_f1 PASSED [ 87%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_partial_overlap_computes_correctly PASSED [ 88%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_non_list_prediction_returns_zero PASSED [ 88%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_all_non_experience_predictions_f1_zero PASSED [ 88%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_perfect_retrieval_f1_is_one PASSED [ 88%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_no_relevant_ids_f1_is_zero PASSED [ 89%]
tests/unit/test_metrics.py::TestSemanticF1Score::test_empty_prediction_f1_is_zero PASSED [ 89%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_perfect_retrieval_scores_high PASSED [ 89%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_prediction_with_non_experience_objects PASSED [ 90%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_scoring_formula_weights PASSED [ 90%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_empty_env_features_both_sides PASSED [ 90%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_empty_goal_both_sides PASSED [ 91%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_empty_prediction_scores_zero PASSED [ 91%]
tests/unit/test_metrics.py::TestMemoryRetrievalQuality::test_non_list_prediction_scores_zero PASSED [ 91%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerAddContext::test_add_multiple_contexts PASSED [ 92%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerAddContext::test_add_context_registers_context PASSED [ 92%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerAsync::test_aplan_concurrent_execution PASSED [ 92%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerAsync::test_aplan_passes_parameters_correctly PASSED [ 92%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerAsync::test_aplan_uses_threadpool PASSED [ 93%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerOptimize::test_optimize_with_miprov2 PASSED [ 93%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerOptimize::test_optimize_with_simba PASSED [ 93%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerOptimize::test_optimize_with_unsupported_optimizer_raises_error PASSED [ 94%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerOptimize::test_optimize_preserves_contexts_and_tools PASSED [ 94%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerInit::test_init_raises_import_error_when_dspy_not_available PASSED [ 94%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerInit::test_init_initializes_tool_list PASSED [ 95%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerInit::test_init_enables_mlflow_tracing PASSED [ 95%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerInit::test_init_configures_dspy_lm PASSED [ 95%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerSaveLoad::test_save_creates_file PASSED [ 96%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerSaveLoad::test_load_restores_planner PASSED [ 96%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerPlan::test_plan_emits_telemetry PASSED [ 96%]
tests/unit/test_dspy_agent.py::TestPraxisRLMPlannerPlan::test_plan_returns_string PASSED [ 96%]
tests/unit/test_tools.py::TestCreateSearchTool::test_tool_signature PASSED [ 97%]
tests/unit/test_tools.py::TestCreateSearchTool::test_tool_calls_context_grep PASSED [ 97%]
tests/unit/test_tools.py::TestCreateSearchTool::test_creates_callable_tool PASSED [ 97%]
tests/unit/test_tools.py::TestCreateExecTool::test_tool_signature PASSED [ 98%]
tests/unit/test_tools.py::TestCreateExecTool::test_tool_calls_context_safe_exec PASSED [ 98%]
tests/unit/test_tools.py::TestCreateExecTool::test_creates_callable_tool PASSED [ 98%]
tests/unit/test_tools.py::TestCreateExecTool::test_tool_returns_string_representation PASSED [ 99%]
tests/unit/test_tools.py::TestCreateRecallTool::test_creates_callable_tool PASSED [ 99%]
tests/unit/test_tools.py::TestCreateRecallTool::test_tool_calls_memory_recall PASSED [ 99%]
tests/unit/test_tools.py::TestCreateRecallTool::test_tool_signature PASSED [100%]

=============================== warnings summary ===============================
../../.pyenv/versions/3.10.14/lib/python3.10/site-packages/bitsandbytes/cextension.py:34
  /Users/speed/.pyenv/versions/3.10.14/lib/python3.10/site-packages/bitsandbytes/cextension.py:34: UserWarning: The installed version of bitsandbytes was compiled without GPU support. 8-bit optimizers, 8-bit multiplication, and GPU quantization are unavailable.
    warn("The installed version of bitsandbytes was compiled without GPU support. "

<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute

<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute

<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type swigvarlink has no __module__ attribute

../../.pyenv/versions/3.10.14/lib/python3.10/site-packages/pydantic/_internal/_config.py:323
  /Users/speed/.pyenv/versions/3.10.14/lib/python3.10/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

../../.pyenv/versions/3.10.14/lib/python3.10/site-packages/pytest_freezegun.py:17: 654 warnings
  /Users/speed/.pyenv/versions/3.10.14/lib/python3.10/site-packages/pytest_freezegun.py:17: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.
    if LooseVersion(pytest.__version__) < LooseVersion('3.6.0'):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
====================== 327 passed, 659 warnings in 12.54s ======================
